<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Knower - Sports Trivia Game</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Navigation Header -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-menu">
                    <button class="nav-btn" onclick="showHome()">
                        <i class="fas fa-home"></i>
                        Home
                    </button>
                    <button class="nav-btn" onclick="showLeaderboard()">
                        <i class="fas fa-trophy"></i>
                        Leaderboard
                    </button>
                    <button class="nav-btn" onclick="showProfile()">
                        <i class="fas fa-user"></i>
                        Profile
                    </button>
                </div>
            </div>
        </nav>

        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <div class="hero-section">
                <div class="hero-banner" id="hero-banner">
                    <div class="hero-content">
                        <h1>Ball Knower</h1>
                        <p>Test your sports knowledge against friends!</p>
                    </div>
                </div>
            </div>


            <div class="game-modes">
                <div class="mode-card" onclick="startGame('college-guesser')">
                    <div class="mode-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>College Guesser</h3>
                    <p>Guess which college a player attended</p>
                </div>

                <div class="mode-card" onclick="startGame('jersey-guesser')">
                    <div class="mode-icon">
                        <i class="fas fa-tshirt"></i>
                    </div>
                    <h3>Jersey Number Guesser</h3>
                    <p>Guess a player's jersey number</p>
                </div>

                <div class="mode-card" onclick="startGame('survival')">
                    <div class="mode-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <h3>Survival Mode</h3>
                    <p>Keep going until you get one wrong!</p>
                    <div class="mode-stats">
                        <span><i class="fas fa-clock"></i> 20 sec</span>
                        <span><i class="fas fa-infinity"></i> Unlimited</span>
                    </div>
                </div>

                <div class="mode-card" onclick="startGame('achievement-guesser')">
                    <div class="mode-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3>Ball Trivia</h3>
                    <p>Sports trivia all ball knowers should know</p>
                </div>

                <div class="mode-card" onclick="showMultiplayerSetup()">
                    <div class="mode-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Multiplayer</h3>
                    <p>Compete against friends in real-time</p>
                    <div class="mode-stats">
                        <span><i class="fas fa-clock"></i> 2 min</span>
                        <span><i class="fas fa-users"></i> 2-8 players</span>
                    </div>
                </div>
            </div>

            <div class="recent-games">
                <h3>Recent Games</h3>
                <div class="game-list">
                    <div class="game-item">
                        <div class="game-info">
                            <span class="game-mode">Player to Fact</span>
                            <span class="game-date">2 hours ago</span>
                        </div>
                        <div class="game-result">
                            <span class="score">8/10</span>
                            <span class="rating">Great!</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Setup Screen -->
        <div id="setup-screen" class="screen">
            <div class="setup-container">
                <h2 id="setup-title">Game Setup</h2>
                
                <div class="sport-selection">
                    <h3>Choose Sport</h3>
                    <p><strong>Select one or more sports</strong> - You can choose NFL, NBA, or both:</p>
                    <div class="sport-options">
                        <button class="sport-btn" onclick="selectSport('nfl')">
                            <i class="fas fa-football-ball"></i>
                            NFL
                        </button>
                        <button class="sport-btn" onclick="selectSport('nba')">
                            <i class="fas fa-basketball-ball"></i>
                            NBA
                        </button>
                        <button class="sport-btn" onclick="selectSport('both')">
                            <i class="fas fa-random"></i>
                            Both
                        </button>
                    </div>
                    <div class="sport-selection-info">
                        <p><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Choose "Both" to get questions from both NFL and NBA players.</p>
                    </div>
                </div>


                <div class="input-type-selection">
                    <h3>Answer Type</h3>
                    <div class="input-type-options">
                        <button class="input-type-btn active" onclick="selectInputType('multiple-choice')">Multiple Choice</button>
                        <button class="input-type-btn" onclick="selectInputType('text-input')">Type Answer</button>
                    </div>
                    <div class="input-type-info">
                        <p><strong>Multiple Choice:</strong> Choose from 4 options (10 seconds per question)</p>
                        <p><strong>Type Answer:</strong> Type your answer (20 seconds per question)</p>
                    </div>
                </div>


                <!-- Game Mode Selection (for Survival Mode) -->
                <div id="game-mode-selection" class="game-mode-selection" style="display: none;">
                    <h3>Choose Game Modes</h3>
                    <p><strong>Select one or more game modes</strong> - You can choose any combination of the three modes below:</p>
                    <div class="mode-options">
                        <label class="mode-option">
                            <input type="checkbox" id="college-mode">
                            <span class="checkmark"></span>
                            <i class="fas fa-graduation-cap"></i>
                            College Guesser
                        </label>
                        <label class="mode-option">
                            <input type="checkbox" id="jersey-mode">
                            <span class="checkmark"></span>
                            <i class="fas fa-tshirt"></i>
                            Jersey Number Guesser
                        </label>
                        <label class="mode-option">
                            <input type="checkbox" id="trivia-mode">
                            <span class="checkmark"></span>
                            <i class="fas fa-trophy"></i>
                            Ball Trivia
                        </label>
                    </div>
                    <div class="mode-selection-info">
                        <p><i class="fas fa-info-circle"></i> <strong>Tip:</strong> You can select 1, 2, or all 3 modes. Questions will be randomly chosen from your selected modes.</p>
                    </div>
                </div>

                <!-- Question Count (for regular modes) -->
                <div id="question-count-section" class="question-count">
                    <h3>Number of Questions</h3>
                    <div class="count-selector">
                        <button onclick="changeQuestionCount(-1)">-</button>
                        <span id="question-count">10</span>
                        <button onclick="changeQuestionCount(1)">+</button>
                    </div>
                </div>

                <!-- High Score Display -->
                <div id="high-score-display" class="high-score-display" style="display: none;">
                    <h3>üèÜ High Score</h3>
                    <div class="high-score-info">
                        <div class="score-item">
                            <span class="score-label">Best Streak:</span>
                            <span id="best-streak" class="score-value">0</span>
                        </div>
                        <div class="score-item">
                            <span class="score-label">Game Mode:</span>
                            <span id="best-mode" class="score-value">-</span>
                        </div>
                    </div>
                </div>

                <div class="game-controls">
                    <button class="btn-secondary" onclick="showHome()">Back</button>
                    <button class="btn-primary" onclick="startGameSession()">Start Game</button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="game-info">
                    <span class="game-mode-badge" id="current-mode">Player to Fact</span>
                    <span class="sport-badge" id="current-sport">NFL</span>
                </div>
                <div class="game-timer">
                    <i class="fas fa-clock"></i>
                    <span id="timer">2:00</span>
                </div>
            </div>

            <div class="game-content">
                <div class="question-container">
                    <div class="question-header">
                        <span class="question-number">Question 1 of 10</span>
                    </div>
                    
                    <div class="player-card" id="player-card">
                        <div class="player-image">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="player-info">
                            <h3 id="player-name">Tom Brady</h3>
                            <p id="player-team">Tampa Bay Buccaneers</p>
                        </div>
                    </div>

                    <div class="question-image-container" id="question-image-container" style="display: none;">
                        <img id="question-image" src="" alt="Question Image">
                    </div>

                    <div class="question-text">
                        <h2 id="question-text">What college did Tom Brady attend?</h2>
                    </div>

                    <div class="answer-options" id="answer-options">
                        <button class="answer-btn" onclick="selectAnswer(0)">Michigan</button>
                        <button class="answer-btn" onclick="selectAnswer(1)">Alabama</button>
                        <button class="answer-btn" onclick="selectAnswer(2)">Ohio State</button>
                        <button class="answer-btn" onclick="selectAnswer(3)">USC</button>
                    </div>
                    
                    <div class="text-input-container" id="text-input-container" style="display: none;">
                        <input type="text" id="text-answer-input" placeholder="Type your answer here..." autocomplete="off">
                        <button class="submit-btn" onclick="submitTextAnswer()">Submit</button>
                    </div>
                </div>
            </div>

            <div class="game-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 10%"></div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-container">
                <h2>Game Complete!</h2>
                
                <div class="final-score">
                    <div class="score-circle">
                        <span class="score-number">8</span>
                        <span class="score-total">/10</span>
                    </div>
                    <h3>Great Job!</h3>
                    <p>You scored 80%</p>
                </div>

                <div class="results-breakdown">
                    <div class="stat-item">
                        <span class="stat-label">Correct Answers</span>
                        <span class="stat-value">8</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Time Used</span>
                        <span class="stat-value">1:45</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Streak</span>
                        <span class="stat-value">5</span>
                    </div>
                </div>

                <!-- High Score Display (Survival Mode Only) -->
                <div id="survival-high-score" class="survival-high-score" style="display: none;">
                    <h3>üèÜ Personal Best</h3>
                    <div class="high-score-comparison">
                        <div class="score-comparison">
                            <div class="current-score">
                                <span class="score-label">This Run</span>
                                <span id="current-streak" class="score-value">0</span>
                            </div>
                            <div class="vs-divider">vs</div>
                            <div class="best-score">
                                <span class="score-label">Best Ever</span>
                                <span id="best-streak-result" class="score-value">0</span>
                            </div>
                        </div>
                        <div class="best-modes">
                            <span class="modes-label">Best achieved with:</span>
                            <span id="best-modes-result" class="modes-value">-</span>
                        </div>
                    </div>
                </div>

                <div class="results-actions">
                    <button class="btn-secondary" onclick="showHome()">Home</button>
                    <button class="btn-primary" onclick="playAgain()">Play Again</button>
                </div>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <div class="leaderboard-container">
                <h2>Leaderboard</h2>
                
                <div class="leaderboard-tabs">
                    <button class="tab-btn active" onclick="showLeaderboardTab('weekly')">This Week</button>
                    <button class="tab-btn" onclick="showLeaderboardTab('monthly')">This Month</button>
                    <button class="tab-btn" onclick="showLeaderboardTab('all-time')">All Time</button>
                </div>

                <div class="leaderboard-list" id="leaderboard-list">
                    <div class="leaderboard-item rank-1">
                        <div class="rank">1</div>
                        <div class="player-info">
                            <div class="player-avatar">JD</div>
                            <div class="player-details">
                                <span class="player-name">John Doe</span>
                                <span class="player-stats">15 games ‚Ä¢ 85% avg</span>
                            </div>
                        </div>
                        <div class="score">1,250</div>
                    </div>
                    
                    <div class="leaderboard-item">
                        <div class="rank">2</div>
                        <div class="player-info">
                            <div class="player-avatar">JS</div>
                            <div class="player-details">
                                <span class="player-name">Jane Smith</span>
                                <span class="player-stats">12 games ‚Ä¢ 82% avg</span>
                            </div>
                        </div>
                        <div class="score">1,180</div>
                    </div>

                    <div class="leaderboard-item">
                        <div class="rank">3</div>
                        <div class="player-info">
                            <div class="player-avatar">MJ</div>
                            <div class="player-details">
                                <span class="player-name">Mike Johnson</span>
                                <span class="player-stats">18 games ‚Ä¢ 78% avg</span>
                            </div>
                        </div>
                        <div class="score">1,120</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Multiplayer Setup Screen -->
        <div id="multiplayer-setup-screen" class="screen">
            <div class="setup-container">
                <h2>Multiplayer Setup</h2>
                
                <div class="multiplayer-options">
                    <div class="option-card" onclick="createRoom()">
                        <div class="option-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h3>Create Room</h3>
                        <p>Start a new game room and invite friends</p>
                    </div>
                    
                    <div class="option-card" onclick="showJoinRoom()">
                        <div class="option-icon">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <h3>Join Room</h3>
                        <p>Enter a room code to join an existing game</p>
                    </div>
                </div>

                <!-- Room Creation Setup -->
                <div class="room-setup" id="room-setup" style="display: none;">
                    <h3>Game Setup</h3>
                    <div class="setup-options">
                        <div class="option-group">
                            <label>Sport:</label>
                            <div class="sport-buttons">
                                <button class="sport-btn active" data-sport="nfl" onclick="selectSport('nfl')">NFL</button>
                                <button class="sport-btn" data-sport="nba" onclick="selectSport('nba')">NBA</button>
                                <button class="sport-btn" data-sport="both" onclick="selectSport('both')">Both</button>
                            </div>
                        </div>
                        
                        <div class="option-group">
                            <label>Game Mode:</label>
                            <div class="mode-buttons">
                                <button class="mode-btn active" data-mode="trivia" onclick="selectMode('trivia')">Ball Trivia</button>
                                <button class="mode-btn" data-mode="college" onclick="selectMode('college')">College Guesser</button>
                                <button class="mode-btn" data-mode="jersey" onclick="selectMode('jersey')">Jersey Guesser</button>
                            </div>
                        </div>
                        
                        <div class="option-group">
                            <label>Input Type:</label>
                            <div class="input-buttons">
                                <button class="input-btn active" data-input="multiple" onclick="selectInput('multiple')">Multiple Choice</button>
                                <button class="input-btn" data-input="type" onclick="selectInput('type')">Type Answer</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button class="btn-secondary" onclick="showMultiplayerSetup()">Cancel</button>
                        <button class="btn-primary" onclick="createRoomWithSettings()">Create Room</button>
                    </div>
                </div>

                <div class="room-code-input" id="room-code-input" style="display: none;">
                    <h3>Enter Room Code</h3>
                    <input type="text" id="room-code" placeholder="Enter 6-digit code" maxlength="6">
                    <div class="game-controls">
                        <button class="btn-secondary" onclick="showMultiplayerSetup()">Back</button>
                        <button class="btn-primary" onclick="joinRoom()">Join Room</button>
                    </div>
                </div>

                <div class="created-room" id="created-room" style="display: none;">
                    <h3>Room Created!</h3>
                    <div class="room-info">
                        <div class="room-code-display">
                            <span>Room Code:</span>
                            <span id="display-room-code">ABC123</span>
                            <button class="copy-btn" onclick="copyRoomCode()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="game-settings-display" id="game-settings-display"></div>
                        <div class="players-list" id="players-list">
                            <div class="player-item">
                                <i class="fas fa-user"></i>
                                <span>You (Host)</span>
                            </div>
                        </div>
                    </div>
                    <div class="game-controls">
                        <button class="btn-secondary" onclick="showMultiplayerSetup()">Cancel</button>
                        <button class="btn-primary" onclick="startMultiplayerGame()">Start Game</button>
                    </div>
                </div>

                <div class="game-controls">
                    <button class="btn-secondary" onclick="showHome()">Back to Home</button>
                </div>
            </div>
        </div>

        <!-- Multiplayer Game Screen -->
        <div id="multiplayer-game-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <div class="room-info">
                        <span class="room-code">Room: <span id="current-room-code">ABC123</span></span>
                        <span class="time-remaining" id="time-remaining">1:00</span>
                    </div>
                    <div class="player-count">
                        <i class="fas fa-users"></i>
                        <span id="player-count">1</span> players
                    </div>
                </div>

                <div class="question-container" id="question-container">
                    <div class="question-card">
                        <div class="question-text" id="question-text">Loading question...</div>
                        <div class="question-options" id="question-options">
                            <!-- Options will be populated here -->
                        </div>
                        <div class="text-input-container" id="text-input-container" style="display: none;">
                            <input type="text" id="text-answer" placeholder="Type your answer..." maxlength="50">
                            <button class="submit-btn" onclick="submitTextAnswer()">Submit</button>
                        </div>
                    </div>
                </div>

                <div class="live-leaderboard" id="live-leaderboard">
                    <h3>Live Leaderboard</h3>
                    <div class="leaderboard-list" id="leaderboard-list">
                        <!-- Players will be populated here -->
                    </div>
                </div>

                <div class="game-controls">
                    <button class="btn-secondary" onclick="leaveMultiplayerGame()">Leave Game</button>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profile-screen" class="screen">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="profile-info">
                        <h2>Player Name</h2>
                        <p>Member since January 2024</p>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-games">0</div>
                        <div class="stat-label">Games Played</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="average-score">0%</div>
                        <div class="stat-label">Average Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="best-streak">0</div>
                        <div class="stat-label">Best Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="achievements-earned">0</div>
                        <div class="stat-label">Achievements</div>
                    </div>
                </div>

                <div class="achievements">
                    <h3>Achievements</h3>
                    <div class="achievement-list" id="achievement-list">
                        <!-- Achievements will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="well_known_players.js"></script>
    <script src="nfl_trivia_embedded.js"></script>
    <script src="nba_trivia_embedded.js"></script>
    <script src="utils/triviaLoader.js"></script>
    <script>
        // Fallback data in case well_known_players.js doesn't load on GitHub Pages
        if (typeof WELL_KNOWN_PLAYERS === 'undefined') {
            console.log('‚ö†Ô∏è Loading fallback player data...');
            window.WELL_KNOWN_PLAYERS = [
                {"id": "nfl_tom_brady", "name": "Tom Brady", "team": "Tampa Bay Buccaneers", "college": "Michigan", "jersey": 12, "position": "QB", "league": "NFL"},
                {"id": "nfl_peyton_manning", "name": "Peyton Manning", "team": "Denver Broncos", "college": "Tennessee", "jersey": 18, "position": "QB", "league": "NFL"},
                {"id": "nfl_aaron_rodgers", "name": "Aaron Rodgers", "team": "New York Jets", "college": "California", "jersey": 8, "position": "QB", "league": "NFL"},
                {"id": "nfl_drew_brees", "name": "Drew Brees", "team": "New Orleans Saints", "college": "Purdue", "jersey": 9, "position": "QB", "league": "NFL"},
                {"id": "nfl_russell_wilson", "name": "Russell Wilson", "team": "Denver Broncos", "college": "Wisconsin", "jersey": 3, "position": "QB", "league": "NFL"}
            ];
            console.log('‚úÖ Fallback data loaded: 5 players');
        }
    </script>
    <script src="utils/dataLoader.js"></script>
    <script src="script.js"></script>
</body>
</html>
