<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <!-- Mobile Navigation Fix -->
    <script>
        function fixMobileNavigation() {
            if (window.innerWidth <= 500) {
                const navBrand = document.querySelector('.nav-brand');
                const navContainer = document.querySelector('.nav-container');
                if (navBrand) {
                    // Show logo but hide text on mobile
                    navBrand.style.display = 'flex';
                    navBrand.style.visibility = 'visible';
                    navBrand.style.opacity = '1';
                    navBrand.style.width = 'auto';
                    navBrand.style.height = 'auto';
                    navBrand.style.overflow = 'visible';
                }
                if (navContainer) {
                    navContainer.style.justifyContent = 'space-between';
                    navContainer.style.padding = '0 0.5rem';
                    navContainer.style.gap = '0.5rem';
                }
            }
        }
        
        // Run on load and resize
        window.addEventListener('load', fixMobileNavigation);
        window.addEventListener('resize', fixMobileNavigation);
        
        // Force remove background images
        function removeBackgroundImages() {
            const heroBanner = document.querySelector('.hero-banner');
            if (heroBanner) {
                heroBanner.style.background = 'linear-gradient(135deg, #0d1b2a 0%, #1b263b 50%, #415a77 100%)';
                heroBanner.style.backgroundImage = 'none';
            }
        }
        
        // Run immediately and on load
        removeBackgroundImages();
        window.addEventListener('load', removeBackgroundImages);
        
        // Force stats cards to be minimal on mobile
        function forceMinimalStats() {
            if (window.innerWidth <= 375) {
                const statsPreview = document.querySelector('.stats-preview');
                const statCards = document.querySelectorAll('.stat-card');
                
                if (statsPreview) {
                    statsPreview.style.display = 'grid';
                    statsPreview.style.gridTemplateColumns = 'repeat(3, 1fr)';
                    statsPreview.style.gap = '0.25rem';
                    statsPreview.style.padding = '0 0.5rem';
                    statsPreview.style.margin = '0.5rem auto 0.25rem auto';
                    statsPreview.style.maxWidth = '100%';
                    statsPreview.style.width = '100%';
                }
                
                statCards.forEach(card => {
                    card.style.padding = '0.9rem 0.5rem';
                    card.style.gap = '0.35rem';
                    card.style.flexDirection = 'column';
                    card.style.textAlign = 'center';
                    card.style.minHeight = '65px';
                    card.style.height = '65px';
                    card.style.display = 'flex';
                    card.style.alignItems = 'center';
                    card.style.justifyContent = 'center';
                    card.style.maxWidth = '100%';
                    card.style.width = '100%';
                    
                    const icon = card.querySelector('i');
                    if (icon) {
                        icon.style.fontSize = '1.3rem';
                        icon.style.margin = '0';
                        icon.style.padding = '0';
                    }
                    
                    const statInfo = card.querySelector('.stat-info');
                    if (statInfo) {
                        statInfo.style.display = 'flex';
                        statInfo.style.flexDirection = 'column';
                        statInfo.style.alignItems = 'center';
                        statInfo.style.gap = '0.1rem';
                        statInfo.style.margin = '0';
                        statInfo.style.padding = '0';
                    }
                    
                    const statValue = card.querySelector('.stat-value');
                    if (statValue) {
                        statValue.style.fontSize = '1.2rem';
                        statValue.style.lineHeight = '1';
                        statValue.style.fontWeight = '700';
                        statValue.style.margin = '0';
                        statValue.style.padding = '0';
                    }
                    
                    const statLabel = card.querySelector('.stat-label');
                    if (statLabel) {
                        statLabel.style.fontSize = '0.85rem';
                        statLabel.style.lineHeight = '1';
                        statLabel.style.textTransform = 'uppercase';
                        statLabel.style.letterSpacing = '0';
                        statLabel.style.opacity = '0.7';
                        statLabel.style.margin = '0';
                        statLabel.style.padding = '0';
                    }
                });
            }
        }
        
        // Run immediately and on load/resize
        forceMinimalStats();
        window.addEventListener('load', forceMinimalStats);
        window.addEventListener('resize', forceMinimalStats);
        
        // Force weekly leaderboard fake data
        function forceWeeklyLeaderboard() {
            const container = document.getElementById('weekly-leaderboard-preview');
            if (container) {
                container.innerHTML = `
                    <div class="top-player">
                        <span class="rank gold">1</span>
                        <span class="player-name">BallKnowerPro</span>
                        <span class="player-score">127 <i class="fas fa-fire"></i></span>
                    </div>
                    <div class="top-player">
                        <span class="rank silver">2</span>
                        <span class="player-name">TriviaKing</span>
                        <span class="player-score">115 <i class="fas fa-fire"></i></span>
                    </div>
                    <div class="top-player">
                        <span class="rank bronze">3</span>
                        <span class="player-name">SportsGuru</span>
                        <span class="player-score">108 <i class="fas fa-fire"></i></span>
                    </div>
                `;
            }
        }
        
        // Run immediately and repeatedly
        forceWeeklyLeaderboard();
        window.addEventListener('load', forceWeeklyLeaderboard);
        setTimeout(forceWeeklyLeaderboard, 100);
        setTimeout(forceWeeklyLeaderboard, 500);
        setTimeout(forceWeeklyLeaderboard, 1000);
        setTimeout(forceWeeklyLeaderboard, 2000);
        setTimeout(forceWeeklyLeaderboard, 3000);
        
        // Force cache clear and refresh
        function forceRefresh() {
            if (performance.navigation.type === 1) {
                // Page was refreshed, clear cache
                if ('caches' in window) {
                    caches.keys().then(function(names) {
                        for (let name of names) {
                            caches.delete(name);
                        }
                    });
                }
            }
        }
        
        // Run on page load
        window.addEventListener('load', forceRefresh);
        
        // Debug logging
        console.log('üîç Debug Info:');
        console.log('Current URL:', window.location.href);
        console.log('CSS version:', 'v25');
        console.log('Logo path:', 'ballknowerlogo.png');
        
        // Test logo loading
        window.addEventListener('load', function() {
            const logo = document.querySelector('.nav-brand img');
            if (logo) {
                console.log('‚úÖ Logo element found:', logo);
                console.log('Logo src:', logo.src);
                console.log('Logo complete:', logo.complete);
                console.log('Logo naturalWidth:', logo.naturalWidth);
                console.log('Logo naturalHeight:', logo.naturalHeight);
                
                // Force logo to show even if it fails to load
                setTimeout(() => {
                    if (logo.naturalWidth === 0) {
                        console.log('üîÑ Logo failed to load, showing fallback');
                        logo.style.display = 'none';
                        const fallback = logo.nextElementSibling;
                        if (fallback) {
                            fallback.style.display = 'inline';
                            fallback.style.fontSize = '2rem';
                            fallback.style.color = '#4CAF50';
                        }
                    }
                }, 2000);
            } else {
                console.log('‚ùå Logo element not found');
            }
        });
    </script>
    <title>Ball Knower - Sports Trivia Game</title>
    <link rel="stylesheet" href="styles.css?v=29">
    <link rel="stylesheet" href="auth-modal-styles.css?v=11">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"> 
    
    <!-- IMMEDIATE PLACEHOLDER FUNCTIONS - Must be defined before any onclick attributes -->
    <script>
        console.log('üöÄ Defining placeholder functions immediately in HTML...');
        
        // Store reference to real function when it loads
        window.realStartGame = null;
        
        // Placeholder functions that will be replaced by the real ones
        window.startGame = function(mode) {
            console.log('üéÆ startGame called (HTML placeholder):', mode);
            
            // Check if real function is available
            if (window.realStartGame && typeof window.realStartGame === 'function') {
                console.log('‚úÖ Real startGame function detected, calling it...');
                // Call the real function
                return window.realStartGame(mode);
            }
            
            // Show a simple message until the real function loads
            alert('Game starting: ' + mode + ' (placeholder function - real function will load soon)');
            // Don't try to do anything else - just show the alert
            return false;
        };
        
        // Add a flag to track when real functions are loaded
        window.realFunctionsLoaded = false;
        
        // Set a flag to indicate placeholder functions are active
        window.placeholderFunctionsActive = true;
        
        // Store references to real functions
        window.realShowMultiplayerSetup = null;
        window.realShowHome = null;
        window.realShowLeaderboard = null;
        window.realShowProfile = null;
        window.realShowState = null;
        window.realSignOut = null;
        window.realHandleModalClick = null;
        
        window.showMultiplayerSetup = function() {
            console.log('üéÆ showMultiplayerSetup called (HTML placeholder)');
            if (window.realShowMultiplayerSetup && typeof window.realShowMultiplayerSetup === 'function') {
                console.log('‚úÖ Real showMultiplayerSetup function detected, calling it...');
                return window.realShowMultiplayerSetup();
            }
            alert('Multiplayer setup (placeholder function)');
        };
        
        window.showHome = function() {
            console.log('üè† showHome called (HTML placeholder)');
            if (window.realShowHome && typeof window.realShowHome === 'function') {
                console.log('‚úÖ Real showHome function detected, calling it...');
                return window.realShowHome();
            }
            alert('Showing home (placeholder function)');
        };
        
        window.showLeaderboard = function() {
            console.log('üèÜ showLeaderboard called (HTML placeholder)');
            if (window.realShowLeaderboard && typeof window.realShowLeaderboard === 'function') {
                console.log('‚úÖ Real showLeaderboard function detected, calling it...');
                return window.realShowLeaderboard();
            }
            alert('Showing leaderboard (placeholder function)');
        };
        
        window.showProfile = function() {
            console.log('üë§ showProfile called (HTML placeholder)');
            if (window.realShowProfile && typeof window.realShowProfile === 'function') {
                console.log('‚úÖ Real showProfile function detected, calling it...');
                return window.realShowProfile();
            }
            alert('Showing profile (placeholder function)');
        };
        
        window.showState = function(state) {
            console.log('üîÑ showState called (HTML placeholder):', state);
            if (window.realShowState && typeof window.realShowState === 'function') {
                console.log('‚úÖ Real showState function detected, calling it...');
                return window.realShowState(state);
            }
            alert('Weekly challenge: ' + state + ' (placeholder function)');
        };
        
        window.signOut = function() {
            console.log('üö™ signOut called (HTML placeholder)');
            if (window.realSignOut && typeof window.realSignOut === 'function') {
                console.log('‚úÖ Real signOut function detected, calling it...');
                return window.realSignOut();
            }
            alert('Signing out (placeholder function)');
        };
        
        window.handleModalClick = function(event) {
            console.log('üñ±Ô∏è handleModalClick called (HTML placeholder):', event);
            if (window.realHandleModalClick && typeof window.realHandleModalClick === 'function') {
                console.log('‚úÖ Real handleModalClick function detected, calling it...');
                return window.realHandleModalClick(event);
            }
            // Don't show alert for modal clicks as they happen frequently
        };
        
        console.log('‚úÖ HTML placeholder functions defined immediately');
    </script>
</head>
<body>
    <div id="app">
        <!-- Navigation Header -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <img src="./ballknowerlogo.png" alt="Ball Knower Logo" class="logo-image" onerror="console.log('Logo failed to load:', this.src); this.style.display='none'; this.nextElementSibling.style.display='inline';" onload="console.log('Logo loaded successfully:', this.src);">
                    <span style="display: none;">üèÄ</span>
                    <span>Ball Knower</span>
                </div>
                <div class="nav-menu">
                    <button id="nav-home-btn" class="nav-btn" onclick="showHome()">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </button>
                    <button id="nav-leaderboard-btn" class="nav-btn" onclick="showLeaderboard()">
                        <i class="fas fa-trophy"></i>
                        <span>Leaderboard</span>
                    </button>
                    <button id="nav-profile-btn" class="nav-btn" onclick="showProfile()">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <div class="hero-section">
                <div class="hero-banner" id="hero-banner">
                    <div class="hero-content">
                        <h1 class="main-title">Do you know ball?</h1>
                        <p class="hero-tagline">Compete with friends. Prove you really know ball.</p>
                        <button class="cta-button" onclick="document.querySelector('.game-modes').scrollIntoView({ behavior: 'smooth', block: 'start' })">
                            <i class="fas fa-play"></i>
                            Play Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Personal Stats Preview -->
            <div class="stats-preview">
                <div class="stat-card">
                    <i class="fas fa-fire"></i>
                    <div class="stat-info">
                        <span class="stat-value" id="best-streak">0</span>
                        <span class="stat-label">Best Streak</span>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-bullseye"></i>
                    <div class="stat-info">
                        <span class="stat-value" id="accuracy">0%</span>
                        <span class="stat-label">Accuracy</span>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-gamepad"></i>
                    <div class="stat-info">
                        <span class="stat-value" id="games-played">0</span>
                        <span class="stat-label">Games Played</span>
                    </div>
                </div>
            </div>

            <!-- Leaderboards Row -->
            <div class="leaderboards-row">
                <!-- Top 3 Today Preview -->
                <div class="leaderboard-preview">
                    <h3><i class="fas fa-crown"></i> Top Ballers Today</h3>
                    <div class="top-players">
                        <div class="top-player">
                            <span class="rank gold">1</span>
                            <span class="player-name">Josh23</span>
                            <span class="player-score">42 <i class="fas fa-fire"></i></span>
                        </div>
                        <div class="top-player">
                            <span class="rank silver">2</span>
                            <span class="player-name">CourtVision</span>
                            <span class="player-score">38 <i class="fas fa-fire"></i></span>
                        </div>
                        <div class="top-player">
                            <span class="rank bronze">3</span>
                            <span class="player-name">HoopMaster</span>
                            <span class="player-score">35 <i class="fas fa-fire"></i></span>
                        </div>
                    </div>
                    <p class="challenge-text">Think you can beat Josh23's 42-streak? üî•</p>
                </div>

                <!-- Weekly Challenge Leaders Preview -->
                <div class="weekly-leaderboard-preview">
                    <h3><i class="fas fa-trophy"></i> Weekly Challenge Leaders</h3>
                    <div class="top-players" id="weekly-leaderboard-preview">
                        <div class="top-player">
                            <span class="rank gold">1</span>
                            <span class="player-name">BallKnowerPro</span>
                            <span class="player-score">127 <i class="fas fa-fire"></i></span>
                        </div>
                        <div class="top-player">
                            <span class="rank silver">2</span>
                            <span class="player-name">TriviaKing</span>
                            <span class="player-score">115 <i class="fas fa-fire"></i></span>
                        </div>
                        <div class="top-player">
                            <span class="rank bronze">3</span>
                            <span class="player-name">SportsGuru</span>
                            <span class="player-score">108 <i class="fas fa-fire"></i></span>
                        </div>
                    </div>
                    
                    <!-- Force fake data with inline script -->
                    <script>
                        // Force fake data immediately when this element loads
                        (function() {
                            const container = document.getElementById('weekly-leaderboard-preview');
                            if (container) {
                                container.innerHTML = `
                                    <div class="top-player">
                                        <span class="rank gold">1</span>
                                        <span class="player-name">BallKnowerPro</span>
                                        <span class="player-score">127 <i class="fas fa-fire"></i></span>
                                    </div>
                                    <div class="top-player">
                                        <span class="rank silver">2</span>
                                        <span class="player-name">TriviaKing</span>
                                        <span class="player-score">115 <i class="fas fa-fire"></i></span>
                                    </div>
                                    <div class="top-player">
                                        <span class="rank bronze">3</span>
                                        <span class="player-name">SportsGuru</span>
                                        <span class="player-score">108 <i class="fas fa-fire"></i></span>
                                    </div>
                                `;
                            }
                        })();
                    </script>
                    <p class="challenge-text">Who will finish #1 this week? üèÜ</p>
                </div>
            </div>


            <div class="game-modes">
                <h2 class="section-title">Choose Your Challenge</h2>
                <div class="mode-card" onclick="startGame('college-guesser')" data-mode="college">
                    <div class="mode-glow"></div>
                    <div class="mode-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>College Guesser</h3>
                    <p class="mode-tagline">üè´ Can you name where the legends came from?</p>
                </div>

                <div class="mode-card" onclick="startGame('jersey-guesser')" data-mode="jersey">
                    <div class="mode-glow"></div>
                    <div class="mode-icon jersey-flip">
                        <i class="fas fa-tshirt"></i>
                    </div>
                    <h3>Jersey Number Guesser</h3>
                    <p class="mode-tagline">üëï Match the icons to their legendary digits</p>
                </div>

                <div class="mode-card survival-mode" onclick="startGame('survival')" data-mode="survival">
                    <div class="mode-glow"></div>
                    <div class="mode-icon fire-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <h3>Survival Mode</h3>
                    <p class="mode-tagline">üî• Don't choke... one wrong and you're out</p>
                    <div class="mode-stats">
                        <span><i class="fas fa-clock"></i> 20 sec</span>
                        <span><i class="fas fa-infinity"></i> Unlimited</span>
                    </div>
                </div>

                <div class="mode-card" onclick="startGame('achievement-guesser')" data-mode="trivia">
                    <div class="mode-glow"></div>
                    <div class="mode-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Ball Trivia</h3>
                    <p class="mode-tagline">üìö Only true ball knowers survive this one</p>
                </div>

                <div class="mode-card multiplayer-mode" onclick="console.log('üéÆ Multiplayer button clicked!'); showMultiplayerSetup();" data-mode="multiplayer">
                    <div class="mode-glow"></div>
                    <div class="mode-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Multiplayer</h3>
                    <p class="mode-tagline">‚öîÔ∏è Battle it out. Winner takes all</p>
                    <div class="mode-stats">
                        <span><i class="fas fa-clock"></i> 1-5 min</span>
                        <span><i class="fas fa-users"></i> 2-8 players</span>
                    </div>
                </div>
            </div>

            <div class="recent-games">
                <h3>Recent Games</h3>
                <div class="game-list">
                    <div class="game-item">
                        <div class="game-info">
                            <span class="game-date">2 hours ago</span>
                        </div>
                        <div class="game-result">
                            <span class="score">8/10</span>
                            <span class="rating">Great!</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Setup Screen -->
        <div id="setup-screen" class="screen">
            <div class="setup-container enhanced-setup">
                <div class="setup-header">
                    <h2 id="setup-title" class="setup-title-enhanced">üéÆ Game Setup</h2>
                    <p class="setup-subtitle">Configure your perfect Ball Knower experience</p>
                </div>
                
                <div class="setup-section sport-selection">
                    <div class="section-header">
                        <h3><i class="fas fa-trophy"></i> Choose Your League</h3>
                    </div>
                    <div class="sport-options enhanced-options">
                        <button class="sport-btn enhanced-btn" onclick="selectSport('nfl')">
                            <div class="btn-icon">
                                <i class="fas fa-football-ball"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">NFL</span>
                                <span class="btn-subtitle">National Football League</span>
                            </div>
                        </button>
                        <button class="sport-btn enhanced-btn" onclick="selectSport('nba')">
                            <div class="btn-icon">
                                <i class="fas fa-basketball-ball"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">NBA</span>
                                <span class="btn-subtitle">National Basketball Assoc.</span>
                            </div>
                        </button>
                        <button class="sport-btn enhanced-btn" onclick="selectSport('both')">
                            <div class="btn-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">Both</span>
                                <span class="btn-subtitle">Ultimate Challenge</span>
                            </div>
                        </button>
                    </div>
                </div>

                <div class="setup-section input-type-selection">
                    <div class="section-header">
                        <h3><i class="fas fa-gamepad"></i> Answer Style</h3>
                    </div>
                    <div class="input-type-options enhanced-options">
                        <button class="input-type-btn enhanced-btn active" onclick="selectInputType('multiple-choice')">
                            <div class="btn-icon">
                                <i class="fas fa-list"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">Multiple Choice</span>
                            </div>
                        </button>
                        <button class="input-type-btn enhanced-btn" onclick="selectInputType('text-input')">
                            <div class="btn-icon">
                                <i class="fas fa-keyboard"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">Type Answer</span>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Game Mode Selection (for survival mode) -->
                <div id="game-mode-selection" class="setup-section game-mode-selection" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-gamepad"></i> Choose Game Modes</h3>
                        <p class="section-description">Select one or more game modes to mix together in your survival challenge</p>
                    </div>
                    <div class="game-mode-options enhanced-options">
                        <label class="game-mode-option enhanced-btn" for="college-mode">
                            <input type="checkbox" id="college-mode" class="mode-checkbox">
                            <div class="checkbox-visual">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="btn-icon">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">College Guesser</span>
                                <span class="btn-subtitle">Name the college</span>
                            </div>
                        </label>
                        <label class="game-mode-option enhanced-btn" for="jersey-mode">
                            <input type="checkbox" id="jersey-mode" class="mode-checkbox">
                            <div class="checkbox-visual">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="btn-icon">
                                <i class="fas fa-tshirt"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">Jersey Guesser</span>
                                <span class="btn-subtitle">Guess the number</span>
                            </div>
                        </label>
                        <label class="game-mode-option enhanced-btn" for="trivia-mode">
                            <input type="checkbox" id="trivia-mode" class="mode-checkbox">
                            <div class="checkbox-visual">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="btn-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="btn-content">
                                <span class="btn-title">General Trivia</span>
                                <span class="btn-subtitle">Test your knowledge</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- High Score Display (for survival mode) -->
                <div id="high-score-display" class="setup-section high-score-display" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-trophy"></i> Your Best Streak</h3>
                    </div>
                    <div class="high-score-content">
                        <div class="high-score-value">
                            <span id="current-high-score">0</span>
                            <span class="high-score-label">Questions</span>
                        </div>
                        <p class="high-score-description">Can you beat your personal best?</p>
                    </div>
                </div>

                <!-- Question Count (for regular modes) -->
                <div id="question-count-section" class="setup-section question-count">
                    <div class="section-header">
                        <h3><i class="fas fa-hashtag"></i> Question Count</h3>
                    </div>
                    <div class="count-selector enhanced-counter">
                        <button class="counter-btn" onclick="changeQuestionCount(-1)">
                            <i class="fas fa-minus"></i>
                        </button>
                        <div class="counter-display">
                            <span id="question-count" class="counter-value">10</span>
                            <span class="counter-label">Questions</span>
                        </div>
                        <button class="counter-btn" onclick="changeQuestionCount(1)">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>

                <div class="game-controls">
                    <button class="btn-secondary" onclick="showHome()">Back</button>
                    <button class="btn-primary" onclick="startGameSession()">Start Game</button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <main class="trivia-layout" role="main">
                <section class="timer-row">
                    <div class="timer-chip" aria-live="polite">
                        <i class="fas fa-clock"></i>
                        <span id="timer">2:00</span>
                    </div>
                </section>

                <section class="progress-row" aria-label="question progress">
                    <div class="progress-chip">
                        <i class="fas fa-trophy"></i>
                        <span id="current-sport-display">NFL</span>
                        <span> ‚Ä¢ </span>
                        <span id="question-progress">Question 1 of 10</span>
                    </div>
                </section>

                <section class="player-row">
                    <div class="player-card" id="player-card">
                        <h3 id="player-name" class="player-name">Michael Thomas</h3>
                        <p id="player-team" class="player-team">New Orleans Saints</p>
                    </div>
                </section>

                <section class="question-row">
                    <div class="question-card">
                        <div class="question-icon-clean">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h2 id="question-text" class="question-text-clean">Which college did Michael Thomas attend?</h2>
                    </div>
                </section>

                <section class="answers-grid" id="answer-options" role="group" aria-label="answer choices">
                    <button class="answer" onclick="selectAnswer(0)">East Carolina</button>
                    <button class="answer" onclick="selectAnswer(1)">USC</button>
                    <button class="answer" onclick="selectAnswer(2)">Ohio State</button>
                    <button class="answer" onclick="selectAnswer(3)">Alabama</button>
                </section>
                
                <div class="text-input-container-clean" id="text-input-container" style="display: none;">
                    <input type="text" id="text-answer-input" placeholder="Type your answer here..." autocomplete="off">
                    <button class="submit-btn-clean" onclick="submitTextAnswer()">Submit</button>
                </div>

                <div class="question-image-container" id="question-image-container" style="display: none;">
                    <img id="question-image" src="" alt="Question Image">
                </div>
            </div>

            <div class="game-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 10%"></div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-container">
                <h2>Game Complete!</h2>
                
                <div class="final-score">
                    <div class="score-circle">
                        <span class="score-number">8</span>
                        <span class="score-total">/10</span>
                    </div>
                    <h3>Great Job!</h3>
                    <p>You scored 80%</p>
                </div>

                <div class="results-breakdown">
                    <div class="stat-item">
                        <span class="stat-label">Correct Answers</span>
                        <span class="stat-value">8</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Time Used</span>
                        <span class="stat-value">1:45</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Streak</span>
                        <span class="stat-value">5</span>
                    </div>
                </div>

                <!-- High Score Display (Survival Mode Only) -->
                <div id="survival-high-score" class="survival-high-score" style="display: none;">
                    <h3>üèÜ Personal Best</h3>
                    <div class="high-score-comparison">
                        <div class="score-comparison">
                            <div class="current-score">
                                <span class="score-label">This Run</span>
                                <span id="current-streak" class="score-value">0</span>
                            </div>
                            <div class="vs-divider">vs</div>
                            <div class="best-score">
                                <span class="score-label">Best Ever</span>
                                <span id="best-streak-result" class="score-value">0</span>
                            </div>
                        </div>
                        <div class="best-modes">
                            <span class="modes-label">Best achieved with:</span>
                            <span id="best-modes-result" class="modes-value">-</span>
                        </div>
                    </div>
                </div>

                <div class="results-actions">
                    <button class="btn-secondary" onclick="showHome()">Home</button>
                    <button class="btn-primary" onclick="playAgain()">Play Again</button>
                </div>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <div class="leaderboard-container">
                <h2>Leaderboard</h2>
                
                <div class="leaderboard-tabs">
                    <button class="tab-btn active" onclick="showLeaderboardTab('weekly')">Weekly Challenge</button>
                    <button class="tab-btn" onclick="showLeaderboardTab('monthly')">This Month</button>
                    <button class="tab-btn" onclick="showLeaderboardTab('all-time')">All Time</button>
                </div>

                <!-- Weekly Challenge Leaderboard -->
                <div id="weekly-leaderboard" class="leaderboard-section active">
                    <div class="leaderboard-header">
                        <h3><i class="fas fa-trophy"></i> Weekly Challenge Standings</h3>
                        <p class="leaderboard-subtitle">Current week's picks leaderboard</p>
                    </div>
                    <div class="leaderboard-list" id="weekly-leaderboard-list">
                        <div class="leaderboard-item rank-1">
                            <div class="rank">1</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">BallKnowerPro</span>
                                    <span class="player-stats">8 games ‚Ä¢ 92% avg</span>
                                </div>
                            </div>
                            <div class="score">127</div>
                        </div>
                        
                        <div class="leaderboard-item">
                            <div class="rank">2</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">TriviaKing</span>
                                    <span class="player-stats">7 games ‚Ä¢ 89% avg</span>
                                </div>
                            </div>
                            <div class="score">115</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">3</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">SportsGuru</span>
                                    <span class="player-stats">9 games ‚Ä¢ 87% avg</span>
                                </div>
                            </div>
                            <div class="score">108</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">4</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">CourtVision</span>
                                    <span class="player-stats">6 games ‚Ä¢ 85% avg</span>
                                </div>
                            </div>
                            <div class="score">98</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">5</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">HoopMaster</span>
                                    <span class="player-stats">8 games ‚Ä¢ 83% avg</span>
                                </div>
                            </div>
                            <div class="score">92</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">6</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Josh23</span>
                                    <span class="player-stats">7 games ‚Ä¢ 81% avg</span>
                                </div>
                            </div>
                            <div class="score">87</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">7</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">GameTime</span>
                                    <span class="player-stats">9 games ‚Ä¢ 79% avg</span>
                                </div>
                            </div>
                            <div class="score">82</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">8</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">StatsMaster</span>
                                    <span class="player-stats">6 games ‚Ä¢ 77% avg</span>
                                </div>
                            </div>
                            <div class="score">76</div>
                        </div>
                    </div>
                    
                    <!-- Force the content to stay by preventing JavaScript override -->
                    <script>
                        // Prevent any JavaScript from overriding this content
                        (function() {
                            const container = document.getElementById('weekly-leaderboard-list');
                            if (container) {
                                // Store the original content
                                const originalContent = container.innerHTML;
                                
                                // Override any attempts to change the content
                                const originalInnerHTML = Object.getOwnPropertyDescriptor(Element.prototype, 'innerHTML');
                                Object.defineProperty(container, 'innerHTML', {
                                    get: function() {
                                        return originalContent;
                                    },
                                    set: function(value) {
                                        console.log('üö´ Blocked attempt to override weekly leaderboard content');
                                        // Don't actually set the content, keep the original
                                    }
                                });
                            }
                        })();
                    </script>
                </div>

                <!-- Monthly Leaderboard -->
                <div id="monthly-leaderboard" class="leaderboard-section">
                    <div class="leaderboard-header">
                        <h3><i class="fas fa-calendar-alt"></i> Monthly Standings</h3>
                        <p class="leaderboard-subtitle">This month's top performers</p>
                    </div>
                    <div class="leaderboard-list" id="monthly-leaderboard-list">
                        <div class="leaderboard-item rank-1">
                            <div class="rank">1</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Alexandra Rivera</span>
                                    <span class="player-stats">32 games ‚Ä¢ 88% avg</span>
                                </div>
                            </div>
                            <div class="score">5,280</div>
                        </div>
                        
                        <div class="leaderboard-item">
                            <div class="rank">2</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Brandon Lee</span>
                                    <span class="player-stats">28 games ‚Ä¢ 86% avg</span>
                                </div>
                            </div>
                            <div class="score">4,920</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">3</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Maya Patel</span>
                                    <span class="player-stats">35 games ‚Ä¢ 84% avg</span>
                                </div>
                            </div>
                            <div class="score">4,760</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">4</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Kevin Anderson</span>
                                    <span class="player-stats">26 games ‚Ä¢ 82% avg</span>
                                </div>
                            </div>
                            <div class="score">4,420</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">5</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Rachel Green</span>
                                    <span class="player-stats">30 games ‚Ä¢ 80% avg</span>
                                </div>
                            </div>
                            <div class="score">4,200</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">6</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">James Wilson</span>
                                    <span class="player-stats">24 games ‚Ä¢ 78% avg</span>
                                </div>
                            </div>
                            <div class="score">3,840</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">7</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Sofia Garcia</span>
                                    <span class="player-stats">29 games ‚Ä¢ 76% avg</span>
                                </div>
                            </div>
                            <div class="score">3,680</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">8</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Ethan Davis</span>
                                    <span class="player-stats">22 games ‚Ä¢ 74% avg</span>
                                </div>
                            </div>
                            <div class="score">3,520</div>
                        </div>
                    </div>
                </div>

                <!-- All Time Leaderboard -->
                <div id="all-time-leaderboard" class="leaderboard-section">
                    <div class="leaderboard-header">
                        <h3><i class="fas fa-crown"></i> All Time Standings</h3>
                        <p class="leaderboard-subtitle">The greatest ball knowers of all time</p>
                    </div>
                    <div class="leaderboard-list" id="all-time-leaderboard-list">
                        <div class="leaderboard-item rank-1">
                            <div class="rank">1</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Jordan Mitchell</span>
                                    <span class="player-stats">156 games ‚Ä¢ 91% avg</span>
                                </div>
                            </div>
                            <div class="score">28,420</div>
                        </div>
                        
                        <div class="leaderboard-item">
                            <div class="rank">2</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Taylor Brooks</span>
                                    <span class="player-stats">142 games ‚Ä¢ 89% avg</span>
                                </div>
                            </div>
                            <div class="score">25,280</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">3</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Casey Murphy</span>
                                    <span class="player-stats">138 games ‚Ä¢ 87% avg</span>
                                </div>
                            </div>
                            <div class="score">24,010</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">4</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Morgan Taylor</span>
                                    <span class="player-stats">134 games ‚Ä¢ 85% avg</span>
                                </div>
                            </div>
                            <div class="score">22,780</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">5</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Riley Cooper</span>
                                    <span class="player-stats">129 games ‚Ä¢ 83% avg</span>
                                </div>
                            </div>
                            <div class="score">21,410</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">6</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Avery Johnson</span>
                                    <span class="player-stats">125 games ‚Ä¢ 81% avg</span>
                                </div>
                            </div>
                            <div class="score">20,250</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">7</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Quinn Rodriguez</span>
                                    <span class="player-stats">121 games ‚Ä¢ 79% avg</span>
                                </div>
                            </div>
                            <div class="score">19,110</div>
                        </div>

                        <div class="leaderboard-item">
                            <div class="rank">8</div>
                            <div class="player-info">
                                <div class="player-details">
                                    <span class="player-name">Blake Thompson</span>
                                    <span class="player-stats">118 games ‚Ä¢ 77% avg</span>
                                </div>
                            </div>
                            <div class="score">18,160</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Multiplayer Setup Screen -->
        <div id="multiplayer-setup-screen" class="screen">
            <div class="setup-container">
                <h2>Multiplayer Setup</h2>
                
                <div id="multiplayer-options" class="multiplayer-options">
                    <div class="option-card" onclick="createRoom()">
                        <div class="option-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h3>Create Room</h3>
                        <p>Start a new game room and invite friends</p>
                    </div>
                    
                    <div class="option-card" onclick="showJoinRoom()">
                        <div class="option-icon">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <h3>Join Room</h3>
                        <p>Enter a room code to join an existing game</p>
                    </div>
                </div>

                <!-- Room Creation Setup -->
                <div class="room-setup" id="room-setup" style="display: none;">
                    <h3>Game Setup</h3>
                    <div class="setup-options">
                        <div class="option-group">
                            <label>Sport:</label>
                            <div class="sport-buttons">
                                <button class="sport-btn active" data-sport="nfl" onclick="selectSport('nfl')">NFL</button>
                                <button class="sport-btn" data-sport="nba" onclick="selectSport('nba')">NBA</button>
                                <button class="sport-btn" data-sport="both" onclick="selectSport('both')">Both</button>
                            </div>
                        </div>
                        
                        <div class="option-group">
                            <label>Game Modes (Select Multiple):</label>
                            <div class="mode-buttons">
                                <button class="mode-btn active" data-mode="trivia" onclick="toggleMode('trivia')">Ball Trivia</button>
                                <button class="mode-btn" data-mode="college" onclick="toggleMode('college')">College Guesser</button>
                                <button class="mode-btn" data-mode="jersey" onclick="toggleMode('jersey')">Jersey Guesser</button>
                            </div>
                            <div class="mode-info">
                                <small>Questions will be randomly selected from your chosen modes</small>
                            </div>
                        </div>
                        
                        <div class="option-group">
                            <label>Input Type:</label>
                            <div class="input-buttons">
                                <button class="input-btn active" data-input="multiple" onclick="selectInput('multiple')">Multiple Choice</button>
                                <button class="input-btn" data-input="type" onclick="selectInput('type')">Type Answer</button>
                            </div>
                        </div>
                        
                        <div class="option-group">
                            <label>Game Duration:</label>
                            <div class="duration-buttons">
                                <button class="duration-btn active" data-duration="60" onclick="selectDuration(60)">1 min</button>
                                <button class="duration-btn" data-duration="120" onclick="selectDuration(120)">2 min</button>
                                <button class="duration-btn" data-duration="180" onclick="selectDuration(180)">3 min</button>
                                <button class="duration-btn" data-duration="240" onclick="selectDuration(240)">4 min</button>
                                <button class="duration-btn" data-duration="300" onclick="selectDuration(300)">5 min</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button class="btn-secondary" onclick="showMultiplayerSetup()">Cancel</button>
                        <button class="btn-primary" onclick="createRoomWithSettings()">Create Room</button>
                    </div>
                </div>

                <div class="room-code-input" id="room-code-input" style="display: none;">
                    <h3>Enter Room Code</h3>
                    <input type="text" id="room-code" placeholder="Enter 6-digit code" maxlength="6">
                    <div class="game-controls">
                        <button class="btn-secondary" onclick="showMultiplayerSetup()">Back</button>
                        <button class="btn-primary" onclick="joinRoom()">Join Room</button>
                    </div>
                </div>

                <div class="created-room" id="created-room" style="display: none;">
                    <h3>Room Created!</h3>
                    <div class="room-info">
                        <div class="room-code-display">
                            <span>Room Code:</span>
                            <span id="display-room-code">ABC123</span>
                            <button class="copy-btn" onclick="copyRoomCode()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="game-settings-display" id="game-settings-display"></div>
                        <div class="players-list" id="players-list">
                            <h4>Players in Room</h4>
                            <div class="player-item">
                                <i class="fas fa-user"></i>
                                <span>You (Host)</span>
                            </div>
                        </div>
                    </div>
                    <div class="game-controls">
                        <button class="btn-secondary" onclick="showMultiplayerSetup()">Cancel</button>
                        <button class="btn-secondary" onclick="simulatePlayerJoin()">Test: Add Player</button>
                        <button class="btn-primary" onclick="startMultiplayerGame()">Start Game</button>
                    </div>
                </div>

                <div class="game-controls">
                    <button class="btn-secondary" onclick="showHome()">Back to Home</button>
                </div>
            </div>
        </div>

        <!-- Multiplayer Game Screen -->
        <div id="multiplayer-waiting-screen" class="screen">
            <div class="waiting-container">
                <div class="waiting-header">
                    <h2>Waiting for Players</h2>
                    <div class="room-info">
                        <span class="room-code">Room: <span id="waiting-room-code">ABC123</span></span>
                    </div>
                </div>
                
                <div class="waiting-content">
                    <div class="game-settings-summary" id="waiting-game-settings">
                        <!-- Game settings will be displayed here -->
                    </div>
                    
                    <div class="players-waiting" id="players-waiting">
                        <h3>Players in Room</h3>
                        <div class="players-list" id="waiting-players-list">
                            <!-- Players will be populated here -->
                        </div>
                    </div>
                    
                    <div class="waiting-status" id="waiting-status">
                        <div class="status-message">
                            <i class="fas fa-clock"></i>
                            <span id="status-text">Waiting for more players...</span>
                        </div>
                        <div class="countdown" id="game-countdown" style="display: none;">
                            <span>Game starting in: </span>
                            <span id="countdown-timer">10</span>
                        </div>
                    </div>
                </div>
                
                <div class="waiting-controls">
                    <button class="btn-secondary" onclick="leaveWaitingRoom()">Leave Room</button>
                    <button class="btn-primary" id="start-game-btn" onclick="startGameCountdown()" style="display: none;">Start Game</button>
                </div>
            </div>
        </div>

        <div id="multiplayer-game-screen" class="screen">
            <div class="game-root">
                <header class="game-header" role="banner">
                    <div class="room-info">
                        <span class="room-code">Room: <span id="current-room-code">ABC123</span></span>
                        <span class="timer-tile" id="time-remaining" aria-live="polite">1:00</span>
                    </div>
                    <div class="players-pill">
                        <i class="fas fa-users"></i>
                        <span id="player-count">1</span> players
                    </div>
                </header>

                <main class="game-main">
                    <section class="question-card" id="question-container" role="region" aria-label="Question">
                        <div class="question-text" id="multiplayer-question-text">Loading question...</div>
                        <div class="question-options" id="question-options">
                            <!-- Options will be populated here -->
                        </div>
                        <div class="text-input-container" id="text-input-container" style="display: none;">
                            <input type="text" id="text-answer" placeholder="Type your answer..." maxlength="50">
                            <button class="submit-btn" onclick="submitTextAnswer()">Submit</button>
                        </div>
                    </section>

                    <div class="current-score" id="current-score">
                        <h3>Your Score</h3>
                        <div class="score-display" id="current-player-score">0</div>
                    </div>
                    
                    <div class="opponent-answers" id="opponent-answers" style="display: none;">
                        <h3>Opponent Answers</h3>
                        <div class="opponent-list" id="opponent-list">
                            <!-- Opponent answers will be shown here -->
                        </div>
                    </div>

                    <div class="game-controls">
                        <button class="btn-secondary" onclick="leaveMultiplayerGame()">Leave Game</button>
                    </div>
                </main>
            </div>
        </div>

        <!-- Multiplayer Results Screen -->
        <div id="multiplayer-results-screen" class="screen">
            <div class="results-container">
                <div class="results-header">
                    <h2>Game Results</h2>
                    <div class="room-info">
                        <span class="room-code">Room: <span id="results-room-code">ABC123</span></span>
                    </div>
                </div>
                
                <div class="results-content">
                    <div class="winner-announcement" id="winner-announcement">
                        <!-- Winner will be displayed here -->
                    </div>
                    
                    <div class="final-leaderboard" id="final-leaderboard">
                        <h3>Final Scores</h3>
                        <div class="leaderboard-list" id="final-leaderboard-list">
                            <!-- Final scores will be populated here -->
                        </div>
                    </div>
                    
                    <div class="game-stats" id="game-stats">
                        <!-- Game statistics will be displayed here -->
                    </div>
                </div>
                
                <div class="results-controls">
                    <button class="btn-secondary" onclick="playAgainMultiplayer()">Play Again</button>
                    <button class="btn-primary" onclick="returnToHome()">Return to Home</button>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profile-screen" class="screen">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-info">
                        <h2>Player Name</h2>
                        <p>Member since January 2024</p>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-games">0</div>
                        <div class="stat-label">Games Played</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="average-score">0%</div>
                        <div class="stat-label">Average Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="best-streak">0</div>
                        <div class="stat-label">Best Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="achievements-earned">0</div>
                        <div class="stat-label">Achievements</div>
                    </div>
                </div>

                <div class="achievements">
                    <h3>Achievements</h3>
                    <div class="achievement-list" id="achievement-list">
                        <!-- Achievements will be populated by JavaScript -->
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="btn-secondary" onclick="signOut()">Sign Out</button>
                </div>
            </div>
        </div>
    </div>

    <script src="well_known_players.js"></script>
    <script src="nfl_trivia_embedded.js"></script>
    <script src="nba_trivia_embedded.js"></script>
    <script src="utils/triviaLoader.js"></script>
    <script>
        // Fallback data in case well_known_players.js doesn't load on GitHub Pages
        if (typeof WELL_KNOWN_PLAYERS === 'undefined') {
            console.log('‚ö†Ô∏è Loading fallback player data...');
            window.WELL_KNOWN_PLAYERS = [
                {"id": "nfl_tom_brady", "name": "Tom Brady", "team": "Tampa Bay Buccaneers", "college": "Michigan", "jersey": 12, "position": "QB", "league": "NFL"},
                {"id": "nfl_peyton_manning", "name": "Peyton Manning", "team": "Denver Broncos", "college": "Tennessee", "jersey": 18, "position": "QB", "league": "NFL"},
                {"id": "nfl_aaron_rodgers", "name": "Aaron Rodgers", "team": "New York Jets", "college": "California", "jersey": 8, "position": "QB", "league": "NFL"},
                {"id": "nfl_drew_brees", "name": "Drew Brees", "team": "New Orleans Saints", "college": "Purdue", "jersey": 9, "position": "QB", "league": "NFL"},
                {"id": "nfl_russell_wilson", "name": "Russell Wilson", "team": "Denver Broncos", "college": "Wisconsin", "jersey": 3, "position": "QB", "league": "NFL"}
            ];
            console.log('‚úÖ Fallback data loaded: 5 players');
        }
    </script>
    <script src="config.js?v=1"></script>
    <script src="utils/dataLoader.js?v=2"></script>
    <script src="script.js?v=14"></script>
</div>

<!-- Weekly Challenge Modal -->
<div id="weekly-challenge-modal" class="challenge-modal" onclick="handleModalClick(event)">
    <div class="challenge-modal-content" onclick="event.stopPropagation()">
        <div class="challenge-modal-header">
            <h2 class="challenge-modal-title" id="modal-title">Sign In</h2>
            <button class="challenge-modal-close" onclick="closeWeeklyChallengeModal()">&times;</button>
        </div>
        
        <div class="challenge-modal-body">
            <!-- STATE: AUTH (Sign In / Create Account) -->
            <div id="state-auth" class="modal-state active">
                <div class="auth-tabs">
                    <button class="auth-tab active" id="signin-tab" onclick="switchToSignInTab()">Sign In</button>
                    <button class="auth-tab" id="create-tab" onclick="switchToCreateTab()">Create Account</button>
                </div>
                
                <!-- Create Account Form -->
                <form id="challenge-register-form" class="auth-form" style="display: none;" onsubmit="handleChallengeRegister(event)">
                    <div class="form-group">
                        <label for="register-username">Username</label>
                        <input type="text" id="register-username" placeholder="ballknower23" required minlength="3">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="register-firstname">First Name</label>
                            <input type="text" id="register-firstname" placeholder="John" required minlength="2">
                        </div>
                        <div class="form-group">
                            <label for="register-lastname">Last Name</label>
                            <input type="text" id="register-lastname" placeholder="Doe" required minlength="2">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <input type="email" id="register-email" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <input type="password" id="register-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="register-confirm-password">Confirm Password</label>
                        <input type="password" id="register-confirm-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6">
                    </div>
                    <button type="submit" class="auth-btn-primary">
                        Create Account
                    </button>
                </form>
                
                <!-- Sign In Form (Default) -->
                <form id="challenge-login-form" class="auth-form" onsubmit="handleChallengeLogin(event)">
                    <div class="form-group">
                        <label for="login-username">Username</label>
                        <input type="text" id="login-username" placeholder="ballknower23" required minlength="3">
                    </div>
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="auth-btn-primary">
                        Sign In
                    </button>
                </form>
            </div>
            
            <!-- STATE: START (shown when signed in and not completed) -->
            <div id="state-start" class="modal-state">
                <div class="start-content">
                    <h3>Ready for this week's challenge?</h3>
                    <p>Make your picks and answer trivia to climb the leaderboard!</p>
                    <button class="auth-btn-primary" onclick="showState('picks')">
                        üèà Start Weekly Challenge
                    </button>
                    <button class="auth-btn-secondary" onclick="signOut()">
                        Sign Out
                    </button>
                </div>
            </div>
            
            <!-- STATE: PICKS (5 games with confidence) -->
            <div id="state-picks" class="modal-state">
                <div class="picks-content">
                    <h3>üèà Make Your Picks</h3>
                    <p>Pick 10 games (5 NFL + 5 College Football) - Select either the favorite or underdog for each game.</p>
                    <p>You'll earn 1 point for each correct pick!</p>
                    <div id="picks-form">
                        <div class="picks-loading">Loading games...</div>
                    </div>
                </div>
            </div>
            
            
            <!-- STATE: THANK YOU -->
            <div id="state-thank-you" class="modal-state">
                <div class="thank-you-card">
                    <h3>Thanks for playing! üéâ</h3>
                    <p>Your picks have been submitted and will be graded after the games finish.</p>
                    <p>Check back after the games to see your score on the leaderboard!</p>
                    <div class="thank-you-actions">
                        <button class="auth-btn-primary" onclick="closeWeeklyChallengeModal()">
                            Exit
                        </button>
                        <button class="auth-btn-secondary" onclick="viewLeaderboard()">
                            View Leaderboard
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- LEGACY: Profile View (will be removed) -->
            <div id="challenge-overview-step" class="challenge-step" style="display: none;">
                <div class="profile-view">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <span id="user-avatar-initials">U</span>
                        </div>
                        <h3 id="user-display-name">User</h3>
                        <p id="user-email">user@example.com</p>
                    </div>
                    
                    <div class="profile-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="user-picks-points">0</div>
                            <div class="stat-label">Picks Points</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="user-trivia-points">0</div>
                            <div class="stat-label">Trivia Points</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="user-streak">0</div>
                            <div class="stat-label">Current Streak</div>
                        </div>
                    </div>
                    
                    <div class="profile-achievements">
                        <h4>üèÜ Achievements</h4>
                        <div id="user-achievements" class="achievements-list">
                            <p class="no-achievements">No achievements yet</p>
                        </div>
                    </div>
                    
                    <div class="profile-actions">
                        <button class="auth-btn-primary" onclick="startWeeklyChallenge()">Start Weekly Challenge</button>
                        <button class="auth-btn-secondary" onclick="signOut()">Sign Out</button>
                    </div>
                </div>
            </div>
            
            <!-- Step 3: Challenge Interface (shown when starting challenge) -->
            <div id="challenge-interface-step" class="challenge-step" style="display: none;">
                <div class="challenge-header">
                    <h3>üèà Week 5 Challenge</h3>
                    <p>Make your picks and answer trivia to climb the leaderboard!</p>
                </div>
                
                <div class="challenge-content">
                    <div class="challenge-section">
                        <h4>üìä Your Progress</h4>
                        <div class="progress-stats">
                            <div class="stat-item">
                                <span class="stat-label">Picks Made</span>
                                <span class="stat-value" id="picks-progress">0/3</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Trivia Answered</span>
                                <span class="stat-value" id="trivia-progress">0/3</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Total Points</span>
                                <span class="stat-value" id="total-points">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="challenge-section">
                        <h4>üéØ This Week's Games</h4>
                        <div class="picks-form" id="picks-form">
                            <div class="picks-loading">Loading games...</div>
                        </div>
                    </div>
                    
                    <div class="challenge-section" id="trivia-step" style="display: none;">
                        <h4>üß† Trivia Questions (5 Questions, 10 seconds each)</h4>
                        <div class="trivia-questions" id="trivia-questions">
                            <div class="trivia-loading">Loading trivia questions...</div>
                        </div>
                    </div>
                </div>
                
                <div class="challenge-actions">
                    <button class="challenge-btn-secondary" onclick="closeWeeklyChallengeModal()">Close</button>
                    <button class="challenge-btn-primary" onclick="submitWeeklyPicks()">Submit Picks</button>
                </div>
            </div>
        </div>
        
        <div class="challenge-modal-footer">
            <p style="font-size: 0.75rem; opacity: 0.7;">üîí No betting. No payments. Just friendly competition.</p>
        </div>
    </div>
</div>

    <script src="auth-functions.js?v=4"></script>
    <script src="weekly_challenge_games.js"></script>
    <script src="weekly-challenge.js?v=41"></script>
    <script>
        console.log('üè† HTML VERSION 2 LOADED - CACHE BUSTED!');
        console.log('HTML has correct onclick handlers:', document.querySelector('[data-mode="trivia"]').onclick.toString().includes('toggleMode'));
    </script>
</body>
</html>
