# MULTIPLAYER TRIVIA FIX - SIMPLE INSTRUCTIONS
# 
# PROBLEM: Multiplayer uses hardcoded questions instead of your actual game data
# 
# SOLUTION: Replace 3 functions in script.js to use the same system as main game
#
# STEP 1: Open script.js in your text editor
# STEP 2: Find these 3 functions and replace them:

# ========================================
# FUNCTION 1: loadMultiplayerQuestion (around line 4046)
# ========================================
# REPLACE THIS ENTIRE FUNCTION:
async function loadMultiplayerQuestion() {
    const { sport, modes, inputType } = multiplayerGame.gameSettings;
    console.log(Loading question for sport: ${sport}, modes: ${modes.join(', ')});
    console.log('ðŸ” dataLoader available:', typeof dataLoader !== 'undefined');
    
    // Randomly select a mode from the available modes
    const randomMode = modes[Math.floor(Math.random() * modes.length)];
    console.log(Selected mode: ${randomMode});
    
    // Always use fallback for now to ensure questions load
    console.log('ðŸ”„ Using immediate fallback question system');
    const fallbackQuestions = [
        {
            type: 'trivia',
            question: 'Which NFL team won the most Super Bowls?',
            options: ['New England Patriots', 'Pittsburgh Steelers', 'Dallas Cowboys', 'San Francisco 49ers'],
            correctAnswer: 'New England Patriots',
            category: 'General',
            difficulty: 'medium',
            league: 'NFL'
        },
        {
            type: 'trivia',
            question: 'Who is the all-time leading rusher in NFL history?',
            options: ['Emmitt Smith', 'Walter Payton', 'Barry Sanders', 'Adrian Peterson'],
            correctAnswer: 'Emmitt Smith',
            category: 'General',
            difficulty: 'medium',
            league: 'NFL'
        },
        {
            type: 'trivia',
            question: 'Which quarterback has the most career passing yards?',
            options: ['Tom Brady', 'Peyton Manning', 'Drew Brees', 'Brett Favre'],
            correctAnswer: 'Tom Brady',
            category: 'General',
            difficulty: 'medium',
            league: 'NFL'
        }
    ];
    
    // Pick a random question and randomize the answer order
    const randomQuestion = fallbackQuestions[Math.floor(Math.random() * fallbackQuestions.length)];
    const shuffledOptions = [...randomQuestion.options].sort(() => Math.random() - 0.5);
    
    const question = {
        ...randomQuestion,
        options: shuffledOptions
    };
    
    console.log('ðŸŽ¯ Using fallback question:', question);
    displayMultiplayerQuestion(question);
}

# WITH THIS:
async function loadMultiplayerQuestion() {
    const { sport, modes, inputType } = multiplayerGame.gameSettings;
    console.log(ðŸŽ® Loading question for sport: ${sport}, modes: ${modes.join(', ')});
    console.log('ðŸ” dataLoader available:', typeof dataLoader !== 'undefined');
    
    // Randomly select a mode from the available modes
    const randomMode = modes[Math.floor(Math.random() * modes.length)];
    console.log(Selected mode: ${randomMode});
    
    // Use the EXACT same system as the main game
    if (randomMode === 'trivia') {
        console.log('ðŸ“š Loading trivia question using main game system');
        await loadTriviaQuestion(sport);
    } else if (randomMode === 'college') {
        console.log('ðŸŽ“ Loading college question using main game system');
        await loadCollegeQuestion(sport);
    } else if (randomMode === 'jersey') {
        console.log('ðŸ‘• Loading jersey question using main game system');
        await loadJerseyQuestion(sport);
    } else {
        console.log('â“ Unknown mode, defaulting to trivia');
        await loadTriviaQuestion(sport);
    }
}

# ========================================
# FUNCTION 2: loadCollegeQuestion (around line 4173)
# ========================================
# REPLACE THIS ENTIRE FUNCTION:
function loadCollegeQuestion(sport) {
    // Handle "both" sport option
    let targetSport = sport;
    if (sport === 'both') {
        // Randomly choose between NFL and NBA for "both"
        targetSport = Math.random() > 0.5 ? 'nfl' : 'nba';
    }
    
    dataLoader.loadPlayers(targetSport).then(players => {
        if (players.length > 0) {
            const question = dataLoader.createCollegeQuestion(players[0], players);
            displayMultiplayerQuestion(question);
        }
    });
}

# WITH THIS:
async function loadCollegeQuestion(sport) {
    // Handle "both" sport option
    let targetSport = sport;
    if (sport === 'both') {
        // Randomly choose between NFL and NBA for "both"
        targetSport = Math.random() > 0.5 ? 'nfl' : 'nba';
    }
    
    console.log(ðŸŽ“ Loading college questions for ${targetSport} using main game system);
    
    // Use the EXACT same system as main game
    const players = await dataLoader.loadPlayers(targetSport);
    if (players.length > 0) {
        // Use the same method as main game: createCollegeQuestionWithPlayer
        const question = dataLoader.createCollegeQuestionWithPlayer(players[0], players);
        if (question) {
            displayMultiplayerQuestion(question);
        } else {
            console.error('Failed to create college question');
        }
    } else {
        console.error('No players loaded for college questions');
    }
}

# ========================================
# FUNCTION 3: loadJerseyQuestion (around line 4189)
# ========================================
# REPLACE THIS ENTIRE FUNCTION:
function loadJerseyQuestion(sport) {
    // Handle "both" sport option
    let targetSport = sport;
    if (sport === 'both') {
        // Randomly choose between NFL and NBA for "both"
        targetSport = Math.random() > 0.5 ? 'nfl' : 'nba';
    }
    
    dataLoader.loadPlayers(targetSport).then(players => {
        if (players.length > 0) {
            const question = dataLoader.createJerseyQuestion(players[0], players);
            displayMultiplayerQuestion(question);
        }
    });
}

# WITH THIS:
async function loadJerseyQuestion(sport) {
    // Handle "both" sport option
    let targetSport = sport;
    if (sport === 'both') {
        // Randomly choose between NFL and NBA for "both"
        targetSport = Math.random() > 0.5 ? 'nfl' : 'nba';
    }
    
    console.log(ðŸ‘• Loading jersey questions for ${targetSport} using main game system);
    
    // Use the EXACT same system as main game
    const players = await dataLoader.loadPlayers(targetSport);
    if (players.length > 0) {
        // Use the same method as main game: createJerseyQuestionWithPlayer
        const question = dataLoader.createJerseyQuestionWithPlayer(players[0], players);
        if (question) {
            displayMultiplayerQuestion(question);
        } else {
            console.error('Failed to create jersey question');
        }
    } else {
        console.error('No players loaded for jersey questions');
    }
}

# ========================================
# WHAT THIS FIX DOES:
# ========================================
# âœ… NFL + Ball Trivia â†’ Uses your actual NFL trivia questions
# âœ… NBA + Ball Trivia â†’ Uses your actual NBA trivia questions  
# âœ… NFL + College Guesser â†’ Uses your actual NFL college questions
# âœ… NBA + College Guesser â†’ Uses your actual NBA college questions
# âœ… NFL + Jersey Guesser â†’ Uses your actual NFL jersey questions
# âœ… NBA + Jersey Guesser â†’ Uses your actual NBA jersey questions
# âœ… Both + Any Mode â†’ Uses both NFL and NBA questions randomly
#
# The multiplayer will now use the EXACT same questions and data as your main game!
